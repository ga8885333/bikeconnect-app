# é¨é¨ ChiChi æ‡‰ç”¨ç¨‹å¼ - CI/CD è‡ªå‹•éƒ¨ç½²å¯¦ä½œ

## ğŸš€ éƒ¨ç½²æ¦‚è¿°

æˆåŠŸç‚ºé¨é¨æ‡‰ç”¨ç¨‹å¼å»ºç«‹å®Œæ•´çš„ GitHub Actions CI/CD å·¥ä½œæµç¨‹ï¼Œè‡ªå‹•éƒ¨ç½²åˆ° Firebase Hostingï¼Œå®Œå…¨ä¿æŒåŸæœ‰çš„ç´…è‰²ä¸»é¡Œå’Œæ‰€æœ‰åŠŸèƒ½ã€‚

## âœ… å·²å¯¦ä½œåŠŸèƒ½

### 1. GitHub Actions å·¥ä½œæµç¨‹
- **æª”æ¡ˆä½ç½®**: `.github/workflows/deploy.yml`
- **è§¸ç™¼æ¢ä»¶**: 
  - Push åˆ° `main` æˆ– `master` åˆ†æ”¯ â†’ ç”Ÿç”¢ç’°å¢ƒéƒ¨ç½²
  - Pull Request â†’ é è¦½ç’°å¢ƒéƒ¨ç½²

### 2. éƒ¨ç½²éšæ®µæµç¨‹

#### ğŸ§ª æ¸¬è©¦éšæ®µ
```yaml
- name: ğŸ§ª Run Tests with Coverage
  run: npm run test:coverage
  env:
    CI: true
```
- åŸ·è¡Œå®Œæ•´çš„å–®å…ƒæ¸¬è©¦å¥—ä»¶
- ç”Ÿæˆæ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
- æ¸¬è©¦å¤±æ•—æ™‚è‡ªå‹•åœæ­¢éƒ¨ç½²æµç¨‹

#### ğŸ—ï¸ æ§‹å»ºéšæ®µ
```yaml
- name: ğŸ—ï¸ Build Application
  run: npm run build
  env:
    CI: false
    GENERATE_SOURCEMAP: false
```
- ä½¿ç”¨ `react-scripts build` æ§‹å»ºç”Ÿç”¢ç‰ˆæœ¬
- é—œé–‰ source map ç”Ÿæˆä»¥æ¸›å°‘æª”æ¡ˆå¤§å°
- ä¿æŒæ‰€æœ‰ UI æ¨£å¼å’ŒåŠŸèƒ½å®Œæ•´

#### ğŸš€ éƒ¨ç½²éšæ®µ
```yaml
- name: ğŸš€ Deploy to Firebase Hosting
  uses: FirebaseExtended/action-hosting-deploy@v0
  with:
    firebaseServiceAccount: '${{ secrets.FIREBASE_SERVICE_ACCOUNT }}'
    projectId: chichi-app-416fa
```

### 3. Firebase é…ç½®

#### `firebase.json` è¨­å®š
```json
{
  "hosting": {
    "public": "build",
    "rewrites": [
      {
        "source": "**",
        "destination": "/index.html"
      }
    ]
  }
}
```

#### `.firebaserc` è¨­å®š
```json
{
  "projects": {
    "default": "chichi-app-416fa"
  }
}
```

## ğŸ”§ GitHub Secrets è¨­å®š

### å¿…è¦çš„ Secrets
1. **FIREBASE_SERVICE_ACCOUNT** âœ… (å·²è¨­å®š)
   - Firebase æœå‹™å¸³æˆ¶ JSON é‡‘é‘°
   - ç”¨æ–¼è‡ªå‹•åŒ–éƒ¨ç½²æˆæ¬Š

2. **GITHUB_TOKEN** âœ… (å…§å»º)
   - GitHub è‡ªå‹•æä¾›
   - ç”¨æ–¼ PR ç•™è¨€å’Œæ¬Šé™ç®¡ç†

## ğŸ“Š è‡ªå‹•åŒ–å ±å‘ŠåŠŸèƒ½

### 1. æ¸¬è©¦è¦†è“‹ç‡å ±å‘Š
- ä½¿ç”¨ `codecov/codecov-action@v3`
- è‡ªå‹•ä¸Šå‚³è¦†è“‹ç‡åˆ° Codecov
- åœ¨ PR ä¸­é¡¯ç¤ºè¦†è“‹ç‡è®ŠåŒ–

### 2. PR è‡ªå‹•ç•™è¨€
```javascript
const body = `## ğŸš€ ChiChi App éƒ¨ç½²å®Œæˆï¼

âœ… **æ¸¬è©¦ç‹€æ…‹**: é€šé
ğŸ“Š **æ¸¬è©¦è¦†è“‹ç‡**: æŸ¥çœ‹ä¸Šæ–¹ Coverage å ±å‘Š
ğŸŒ **é è¦½ç¶²å€**: https://chichi-app-416fa.web.app

### ğŸ¨ UI ç¢ºèªæ¸…å–®
- [x] ç´…è‰²ä¸»é¡Œä¿æŒä¸è®Š
- [x] å¤šèªç³»åŠŸèƒ½æ­£å¸¸
- [x] éŸ¿æ‡‰å¼è¨­è¨ˆå®Œæ•´
- [x] PWA åŠŸèƒ½æ”¯æ´`;
```

## ğŸŒ éƒ¨ç½²ç¶²å€

### ç”Ÿç”¢ç’°å¢ƒ
- **ç¶²å€**: https://chichi-app-416fa.web.app
- **è§¸ç™¼**: Push åˆ° main/master åˆ†æ”¯
- **ç‹€æ…‹**: ğŸŸ¢ è‡ªå‹•éƒ¨ç½²

### é è¦½ç’°å¢ƒ
- **ç¶²å€**: https://chichi-app-416fa.web.app (Preview Channel)
- **è§¸ç™¼**: Pull Request
- **ç‹€æ…‹**: ğŸŸ¡ PR é è¦½

## ğŸ¨ UI/UX ä¿è­·æªæ–½

### æ¨£å¼ä¿æŒç­–ç•¥
1. **ç´…è‰²ä¸»é¡Œå®Œå…¨ä¿ç•™**
   - ä¸»è‰²èª¿: `#dc2626` (red-600)
   - èƒŒæ™¯è‰²: `#ef4444` (red-500)
   - è¼”åŠ©è‰²: `#fef2f2` (red-50)

2. **å¤šèªç³»åŠŸèƒ½ä¿æŒ**
   - ç¹é«”ä¸­æ–‡ (zh-TW) - é è¨­
   - ç°¡é«”ä¸­æ–‡ (zh-CN)
   - è‹±æ–‡ (en)

3. **éŸ¿æ‡‰å¼è¨­è¨ˆä¸è®Š**
   - æ‰‹æ©Ÿç‰ˆä½ˆå±€å®Œæ•´
   - å¹³æ¿ç‰ˆé©é…æ­£å¸¸
   - æ¡Œé¢ç‰ˆé¡¯ç¤ºå„ªåŒ–

4. **PWA åŠŸèƒ½æ”¯æ´**
   - Service Worker æ­£å¸¸
   - é›¢ç·šåŠŸèƒ½å¯ç”¨
   - å®‰è£æç¤ºä¿æŒ

## ğŸ”„ éƒ¨ç½²æµç¨‹åœ–

```
GitHub Push/PR
       â†“
   Checkout Code
       â†“
   Setup Node.js 18
       â†“
   Install Dependencies
       â†“
   Run Tests + Coverage â† å¤±æ•—å‰‡åœæ­¢
       â†“
   Build Application
       â†“
   Deploy to Firebase
       â†“
   Update PR Comment
       â†“
   ğŸ‰ éƒ¨ç½²å®Œæˆ
```

## ğŸ§ª æ¸¬è©¦é©—è­‰

### è‡ªå‹•åŒ–æ¸¬è©¦
- âœ… å–®å…ƒæ¸¬è©¦åŸ·è¡Œ
- âœ… æ¸¬è©¦è¦†è“‹ç‡ç”Ÿæˆ
- âœ… æ§‹å»ºæˆåŠŸé©—è­‰
- âœ… éƒ¨ç½²ç‹€æ…‹ç¢ºèª

### æ‰‹å‹•é©—è­‰æ¸…å–®
- [ ] è¨ªå•éƒ¨ç½²ç¶²å€
- [ ] ç¢ºèªç´…è‰²ä¸»é¡Œæ­£å¸¸
- [ ] æ¸¬è©¦å¤šèªç³»åˆ‡æ›
- [ ] é©—è­‰éŸ¿æ‡‰å¼è¨­è¨ˆ
- [ ] æª¢æŸ¥æ‰€æœ‰é é¢åŠŸèƒ½

## ğŸ“ˆ æ•ˆèƒ½å„ªåŒ–

### æ§‹å»ºå„ªåŒ–
- é—œé–‰ source map ç”Ÿæˆ
- éœæ…‹è³‡æºå¿«å–è¨­å®š
- Gzip å£“ç¸®å•Ÿç”¨

### å¿«å–ç­–ç•¥
```json
{
  "source": "/static/**",
  "headers": [
    {
      "key": "Cache-Control",
      "value": "public, max-age=31536000, immutable"
    }
  ]
}
```

## ğŸš¨ æ•…éšœæ’é™¤

### å¸¸è¦‹å•é¡Œ
1. **æ¸¬è©¦å¤±æ•—**
   - æª¢æŸ¥æ¸¬è©¦æª”æ¡ˆèªæ³•
   - ç¢ºèªæ¨¡æ“¬è¨­å®šæ­£ç¢º

2. **æ§‹å»ºå¤±æ•—**
   - æª¢æŸ¥ä¾è³´ç‰ˆæœ¬è¡çª
   - ç¢ºèªç’°å¢ƒè®Šæ•¸è¨­å®š

3. **éƒ¨ç½²å¤±æ•—**
   - é©—è­‰ Firebase Service Account
   - æª¢æŸ¥å°ˆæ¡ˆ ID æ­£ç¢ºæ€§

### é™¤éŒ¯æŒ‡ä»¤
```bash
# æœ¬åœ°æ¸¬è©¦
npm run test:coverage
npm run build

# Firebase æœ¬åœ°é è¦½
firebase serve --only hosting
```

## âœ¨ ç¸½çµ

æˆåŠŸå»ºç«‹äº†å®Œæ•´çš„ CI/CD è‡ªå‹•éƒ¨ç½²æµç¨‹ï¼š

**æ ¸å¿ƒå„ªå‹¢**ï¼š
- ğŸš€ å…¨è‡ªå‹•éƒ¨ç½²æµç¨‹
- ğŸ§ª æ¸¬è©¦é©…å‹•éƒ¨ç½²
- ğŸ¨ UI æ¨£å¼å®Œå…¨ä¿è­·
- ğŸ“Š è©³ç´°å ±å‘Šç”Ÿæˆ
- ğŸ”„ PR é è¦½åŠŸèƒ½
- âš¡ å¿«é€Ÿéƒ¨ç½²é«”é©—

**éƒ¨ç½²ç¶²å€**: https://chichi-app-416fa.web.app

ç¾åœ¨æ¯æ¬¡ Push ä»£ç¢¼éƒ½æœƒè‡ªå‹•è§¸ç™¼æ¸¬è©¦ã€æ§‹å»ºå’Œéƒ¨ç½²æµç¨‹ï¼Œç¢ºä¿é¨é¨æ‡‰ç”¨ç¨‹å¼å§‹çµ‚ä¿æŒæœ€æ–°ç‹€æ…‹ä¸”åŠŸèƒ½å®Œæ•´ï¼ 